<!DOCTYPE HTML>
<html>
<head>
  <title>9. Transformations</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="../../../structure/summaryStyles.css" type="text/css">
  <link rel="stylesheet" href="../../../structure/maths/mathStyles.css" type="text/css">
  <link rel="stylesheet" href="../../../structure/printStyles.css" type="text/css">
  <script src="../../../structure/videoControls/jquery.js"></script>
  <script src="../../../structure/maths/theorems.js"></script>
  <script src="../../../structure/maths/mathJax/MathJax.js?config=TeX-AMS-MML_SVG,statMacros.js"></script>
  <script src="../../../structure/printFixes.js"></script>
</head>

<body id="body" onLoad="showPrintDialog(true)">
<div id='overlay'>
	<div id='dialogWindow'>
		<div class='printDialog'>
			<script type='text/javascript'>
				document.write("<div class='heading'>" + top.document.title + "</div>");
				if (top.url != null) {
					document.write("<p class='text'>A version of this chapter has already been generated in PDF format and we recommend that it is used for printing. The button below will download and display it.</p>");
					document.write("<p><button onClick='top.showPdf()'>Show PDF version of chapter</button></p>");
					document.write("<p class='text'>However downloading could be slow depending on your internet connection. If this is a problem, click the button below to print the chapter without downloading (but perhaps not formatted as well as the PDF version).</p>");
					document.write("<p><button onClick='top.doPrint()'>Show print dialog</button></p>");
					document.write("<p class='text'>If you are <strong>not</strong> using the PDF version, the best print results are obtained if the text is reduced in size and printed on  sheets of paper that are smaller than A4. This can be done using your browser's Page Setup command to scale by 71% and then printing on A5 paper.</p>");
				}
				else {
					document.write("<p class='text'>Click the button below to print this chapter.</p>");
					document.write("<p><button onClick='top.doPrint()'>Show print dialog</button></p>");
					document.write("<p class='text'>The best print results are obtained if the text is reduced in size and printed on  sheets of paper that are smaller than A4. This can be done using your browser's Page Setup command to scale by 71% and then printing on A5 paper.</p>");
				}
			</script>
			
			<p class='text'>If you don't want to print now,</p>
			<p><button onClick='top.showPrintDialog(false)'>Browse formatted chapter</button></p>
		</div>
	</div>
</div>
<h1 class="chapterName">Chapter 9 &nbsp; Transformations</h1>
<h1 class="sectionName">9.1 &nbsp; Transformations</h1>
<h2 class="pageName">9.1.1 &nbsp; Linear transformations</h2>

<p class="heading notPrinted">Linear transformations</p>
<p>When the  values are replaced by other using
an equation of the form </p>
<p class=eqn><span class="black"><strong>new value</strong> &nbsp; = &nbsp; <em>a</em> &nbsp;+ &nbsp;<em>b</em> &nbsp;&times &nbsp;<strong>old value</strong></span> </p>
<p>we say that there has been a <strong>linear transformation</strong> of the
original values. The original and transformed data can be displayed together with <strong>dual
axes</strong>.</p>
<p class="eqn"><img src="../../../en/transform/images/s_linear.gif" width="454" height="180"></p>
<p class="heading">Centre and spread</p>
<p>The centre and spread of the data are different, but the shape of the distribution
otherwise remains unchanged. The mean and standard deviation are related:</p>
<p class=eqn><span class="black"><strong>new mean</strong> &nbsp; = &nbsp; <em>a</em> &nbsp;+ &nbsp;<em>b</em> &nbsp;&times &nbsp;<strong>old mean</strong></span></p>
<p class=eqn> <span class="black"><strong>new sd</strong> &nbsp; = &nbsp;<em><font size="+1">|</font>b<font size="+1">|</font></em> &nbsp;&times &nbsp;<strong>old sd</strong></span> </p>
<p>Note that if the scale factor, b, is negative, we must change its sign since
 the standard deviation must always be positive.</p>
<p>Most other measures of centre (e.g. the median) and spread (e.g. the interquartile
range) are similarly related.</p>




<h2 class="pageName">9.1.2 &nbsp; Log transformations</h2>

<p class="heading">Nonlinear transformations</p>
	<p>Nonlinear transformations arise when the values are replaced by a nonlinear function of the original measurements, such as their logarithm or inverse. They  have a more fundamental effect on
	the shape of a distribution than linear transformations. </p>
	<p>The most commonly used nonlinear transformation is:</p>
	<p class=eqn><span class="black"><strong>new value</strong> &nbsp; = log<sub>10</sub> <font size="+1">(</font><strong>old value</strong><font size="+1">)</font></span> </p>
	<p>Natural logarithms (base <em>e</em>) have a similar effect on the distribution
of values but base-10 logarithms are easier to interpret so we use them here.</p>
<p class="heading">Properties of logarithms</p>
	<ul>
		<li>Multiplying any value by 10 increases its logarithm by 1.</li>
		<li>Doubling any value increases its logarithm by log<sub>10</sub>(2) = 0.3010.</li>
</ul>
<p>Consider four values 1, 10, 100 and 1000. The first two values are much closer 
		to each other than the last two values. However their logarithms are 0, 1, 
		2 and 3, so their logarithms are evenly spaced out.</p>
	<p class="heading">Effect on the shape of a distribution</p>
	<p>A logarithmic transformation selectively spreads out low values 
		in a distribution and compresses high values. It is therefore useful before
analysing skew data with a long tail towards the high values. It will spread
out a dense cluster of low values and may detect clustering or outliers that
would not be visible in graphical displays of the original data.</p>
	<p class="eqn"><img src="../../../en/transform/images/s_log.gif" width="499" height="236"></p>




<h2 class="pageName">9.1.3 &nbsp; When to use log transform?</h2>

<p class="heading notPrinted">'Quantities'</p>
	<p>Logarithmic transformation can only be used for data sets consisting of positive
 values &mdash; logarithms are undefined for negative or zero values. They are therefore
particularly useful for <strong>quantities</strong> &mdash; 
		i.e. amounts of something. Indeed, many researchers <strong>routinely</strong> apply
logarithmic transformation  to quantity data before analysis.</p>
<p class="heading notPrinted">When are they effective?</p>
	<p>A log transformation affects the shape of the distribution most when the
ratio of the largest to the smallest value in the data is large. When this ratio
is less than 10 (one <strong>order of magnitude</strong>) then the transformation
has much less influence on the shape of the distribution, as in the data set
below.</p>
<p class="eqn"><img src="../../../en/transform/images/s_log2.gif" width="499" height="272"></p>




<h2 class="pageName">9.1.4 &nbsp; Power transformations ((advanced))</h2>

<p class="heading notPrinted">Power transformations</p>
	<p>A more general family of transformations that is flexible enough to  reduce
or eliminate the skewness in a wide range of data sets is:</p>
	<p class=eqn><img class="gif" src="../../../en/transform/images/boxCoxEqn.gif" width="409" height="106"> </p>
	<p>This family of <strong>power transformations</strong> includes many common ones:</p>
	<p class=eqn><img class="gif" src="../../../en/transform/images/powerTable.gif" width="363" height="254"></p>




<h2 class="pageName">9.1.5 &nbsp; Power transforms &amp; skewness</h2>

<p class="heading">Effect of power transformations</p>
<p>Power transformations affect the skewness of data.</p>
<p>If a power transformation with <em>p</em> &gt; 1 is applied to data with a
symmetric distribution, it will make the data skew with a long right tail. If
the power transformation has <em>p</em> &lt; 1, the distribution will become one
with a long left tail.</p>
<p>In practice, power transformations are used to do the opposite. They can change many skewness distributions into fairly symmetric ones.</p>




<h1 class="sectionName breakBefore">9.2 &nbsp; Nonlinear relationships</h1>
<h2 class="pageName">9.2.1 &nbsp; Transformations and correlation</h2>

<p class="heading">Correlation coefficient and nonlinear relationships</p>
	<p>The correlation coefficient, <i>r</i>, is a good description of the strength 
		of linear relationship but <a href="javascript:showNamedPage('correlation4')">not 
			nonlinear ones</a>. If a scatterplot shows marked curvature, the correlation 
		coefficient can considerably understate the strength of the relationship.</p>
	<p class="heading">Transform the variables to linearise the relationship</p>
	<p>Nonlinear transformations of X and Y alters the shape of the relationship. It is often possible 
		to linearise a relationship by transforming one or both variables.</p>
<p>The strength of a nonlinear relationship can therefore be described with the
correlation coefficient after  a transformation to one or both variables has
been applied to <strong>remove
the nonlinearity</strong>.</p>
<p class="eqn"><img src="../../../en/curvature/images/s_rawCorr.gif" width="354" height="276"><img src="../../../en/curvature/images/s_logCorr.gif" width="354" height="276"></p>




<h2 class="pageName">9.2.2 &nbsp; Transformations and models</h2>

<p class="heading">Linear model with transformed variables</p>
	<p>If the relationship between <i>Y</i> and <i>X</i> is nonlinear, a linear 
		model will give poor predictions and must be avoided.</p>
	<p class="eqn"><img src="../../../en/curvature/images/s_rawModel.gif" width="303" height="230"></p>
	<p>However, by transforming 
		one or both of the variables, it is often possible to linearise the relationship 
		and therefore use least squares to fit a linear model to the transformed variables.</p>
	<p class="eqn"><img src="../../../en/curvature/images/s_logModel.gif" width="550" height="232"></p>
	<p>A logarithmic transformation of either Y or X often works, but a more general 
		power transformation is sometimes needed to linearise the relationship.</p>




<h2 class="pageName">9.2.3 &nbsp; Quadratic models</h2>

<p class="heading notPrinted">Adding a quadratic term</p>
	<p>An alternative solution to the problem of curvature is to extend the simple 
		linear model with the addition of a quadratic term, </p>
	<p class=eqn><span class="black"><em>y</em>&nbsp;&nbsp;=&nbsp;&nbsp;<em>b</em><sub>0</sub>&nbsp;&nbsp;+&nbsp;&nbsp;<em>b</em><sub>1 </sub><em>x</em>&nbsp;&nbsp;+&nbsp;&nbsp;<em>b</em><sub>2 </sub><em>x</em><sup>2</sup></span> </p>
	<p>Fitted values and residuals are defined (and interpreted) in a similar way 
		to those for a linear model,</p>
	<p class=eqn><span class="black"><span style="position:relative; top:4"><img src="../../../en/../images/symbol.yiHat.png" width="11" height="18" align="baseline"></span>&nbsp;&nbsp;=&nbsp;&nbsp;<em>b</em><sub>0</sub>&nbsp;&nbsp;+&nbsp;&nbsp;<em>b</em><sub>1 </sub><em>x<sub>i</sub></em>&nbsp;&nbsp;+&nbsp;&nbsp;<em>b</em><sub>1 </sub><em>x<sub>i</sub></em><sup>2</sup></span> <br>
			<span class="black"><em>e<sub>i</sub></em>&nbsp;&nbsp;=&nbsp;&nbsp;<em>y<sub>i</sub></em> &minus; <span style="position:relative; top:4"><img src="../../../en/../images/symbol.yiHat.png" width="11" height="18" align="baseline"></span></span> </p>
	<p>As in a linear model, the quadratic model's residuals are the vertical distances 
		between the crosses in a scatterplot and the curve. We again use <strong>least 
			squares</strong> to estimate the unknown parameters &mdash; choose values of the 
		three parameters to minimise the residual sum of squares, </p>
	<p class=eqn><img class="gif" src="../../../en/curvature/images/residSsqEqn.gif" width="369" height="28"> </p>
	<p class="eqn"><img src="../../../en/curvature/images/s_quadraticModel.gif" width="374" height="327"></p>




<h2 class="pageName">9.2.4 &nbsp; Dangers of extrapolation</h2>

<p class="heading notPrinted">The shape of a relationship is only known around the data</p>
	<p>The models that we have used to describe the relationship between a response, <i>Y</i>, and explanatory variable, <i>X</i>, are usually only approximations to
		the 'real' relationship. For example, a scatterplot may <strong>look</strong> linear,
		but we really have no information about the shape of the relationship beyond our data. </p>
	<p class=eqn><img class="gif" src="../../../en/curvature/images/extrapolate.gif" width="256" height="166">
	<p>A model may be useful for predicting <i>Y</i> from values of <i>X</i> that are within the range of x-values in our data, but we
		should be very cautious about using it to predict <em>Y</em> outside this range.
		This is called <strong>extrapolation</strong> and it can be badly in error. </p>
	
<div class="centred"><div class="boxed">
<p>Avoid using a model to predict <em>Y</em> far beyond the available 
				data.</p>
</div></div>





</body>
</html>
