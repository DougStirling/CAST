<!DOCTYPE HTML>
<html>
<head>
	<title>Transformations and correlation</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="../../pageStyles.css" type="text/css">
	<script src="../../releaseInfo.js"></script>
	<script src="../../structure/pageSetup.js"></script>

	<meta name="index" content="transformations, correlation coefficient/transform to linearity first">
	<meta name="dataset" content="Mazda car prices">
	<meta name="dataset" content="World GDP">
</head>


<body>
<script type="text/javascript">writePageStart();</script>

<p class="heading">Correlation coefficient and nonlinear relationships</p>

  <p>The correlation coefficient, <i>r</i>, is a good description of the strength 
		of linear relationship but
		<a href="javascript:showNamedPage('correlation4')">not 
		nonlinear ones</a>. If a scatterplot shows marked curvature, the correlation 
		coefficient can considerably understate the strength of the relationship.</p>
	<p>How can you summarise the strength of a nonlinear relationship? One solution 
    is to use a different summary statistic that has better properties than <i>r</i>. 
    In this page, we describe an alternative solution to the problem.</p>
	
	<p class="heading">Transform the variables to linearise the relationship</p>
	
	<p><a href="javascript:showNamedPage('transform2')">Applying 
		a nonlinear transformation</a> (such as a log transformation) to a single 
		variable changes the shape of its distribution and can be used to eliminate 
		skewness.</p>
	<p>Nonlinear transformation of a variable has a more important effect on bivariate 
		data &mdash; it alters the shape of the relationship. (It is easier to explain 
		how this happens in the diagram below than in words!) It is often possible 
		to linearise a relationship by transforming one or both variables.</p>
	<p>Therefore one way to use <i>r</i> to describe nonlinear relationships is 
		to apply a transformation to one or both variables to <strong>remove the nonlinearity</strong> 
		before evaluating <i>r</i>.</p>

  <div class="diagram">
	
	<p class="heading">Prices of Mazda cars</p>
	
		<p>The scatterplot below shows the price and age of second hand Mazda cars 
			that were advertised for sale in the <i>Melbourne Age</i> newspaper on 8 
			February 1992. The relationship is clearly nonlinear with a steep initial 
			decline in price followed by a more gradual decrease.</p>
		<div class="centred">
<applet codebase="../../java" code="dataView.CastApplet.class" archive="coreCAST.jar" width="350" height="370">
<script type="text/javascript">writeAppletParams();</script>
<param name="appletName" value="corrProg.CorrelTransApplet">
<param name="xVarName" value="Age of car">
<param name="yVarName" value="Price">
<param name="xValues" value="12 9 8 3 9 1 9 10 5 9 2 11 18 10 12 11 6 4 7 2 18 7 13 6 1 4 1 2 3 3 5 9 10 3 6 1 12 11 6 20 12 17 3 7 11 8 12 18 4 14 15 3 3 13 10 2 12 10 5 9 15 10 10 9 12 10 10 14 13 16 11 4 8 6 7 7 3 12 9 7 7 7 8 5 12 0 7 5 11 2 8 5 15 5 7 12 8 4 6 1 9 4 15 5 2 3 2 1 0 5 7 2 17 9 11 1 9 12 9 14 3 5 0 2">
<param name="yValues" value="2950 5900 2999 11950 6100 26500 6850 5490 12999 9900 19900 3990 800 3900 7000 2750 11000 9850 7500 26500 1990 7000 3500 6990 39990 29990 29990 25990 21990 19990 6000 5999 5990 12500 14000 20500 4250 4500 7750 950 4300 2300 9490 8900 3000 6500 8000 1450 14150 1950 1800 18000 16350 1690 3490 26000 4000 5490 7900 10500 799 4200 5500 11500 2600 5100 4000 4500 2600 2400 4900 14950 8900 13490 5499 12999 21500 4200 4200 10500 10800 8600 8950 7900 3700 25600 11000 8700 3800 10950 6450 9450 2950 10500 8000 4600 4975 18950 10000 30000 4000 7650 2695 12490 36900 18000 27900 22950 23900 11900 9800 20980 5000 10980 2800 24500 10995 7879 6990 1498 17900 9990 13990 9990">
<param name="horizAxis" value="0 21 0 2">
<param name="vertAxis" value="750 45000 5000 5000">
<param name="labelAxes" value="true">
<param name="transformAxes" value="true">
</applet>
</div>

		<p>The correlation coefficient is <i>r</i> = -0.8, indicating a fairly strong 
			relationship between the price and age of these cars, but the nonlinearity 
			means that the strength of the relationship is understated by this. </p>

		<p>Drag the red line on the vertical axis upwards to apply a power transformation 
			to the car prices. When the power becomes close to zero (which corresponds 
			to a log transformation of the response), the relationship becomes nearly 
			linear. Since the relationship between log(price) and age is approximately 
			linear, the correlation coefficient between these two variables, <i>r</i> 
			= -0.9, is a better description of the strength of the relationship. </p>
		</div>

<p class=heading>Choosing the transformation</p>

  <p><strong>How do you decide which variable to transform to use?</strong> There 
    is no easy answer that works for all data sets, but a useful approach is to 
    look at the marginal distributions of each variable seperately and to initially 
    try transformations that remove any skewness in these distributions. </p>

<div class="diagram">

<p class=heading>GDP and population</p>

		<p>The scatterplot below shows the Gross Domestic Product (GDP in US$billion) 
			and population (million) in the all countries of the world in 2012. The 
			box plots on the two axes show that each of the variables has a skew distribution. 
			Because of the dense cluster of countries near the origin of the plot, it 
			is difficult to assess whether or not there is <strong>any</strong> relationship 
			between the variables. Notions of linearity cannot even be assessed. </p>

<div class="centred">
<applet codebase="../../java" code="dataView.CastApplet.class" archive="coreCAST.jar" width="350" height="390">
<script type="text/javascript">writeAppletParams();</script>
<param name="appletName" value="corrProg.CorrelTransBoxApplet">
<param name="xVarName" value="Population">
<param name="yVarName" value="GDP">
<param name="labelName" value="Country">
<param name="xValues" value="7.04 125.2 4.36 5.23 263.43 8.83 81.64 5.11 58.15 15.45 1.93 8.53 10.11 29.61 58.3 18.05 3.58 58.26 2.99 1.69 3.54 6.19 5.54 39.21 21.3 3.67 2.16 44.85 17.88 10.46 10.8 5.21 1.28 34.77 1.32 1.98 10.33 61.28 20.14 5.36 21.64 3.19 14.2 8.8 1.53 28.55 2.63 41.24 10.22 155.82 2.51 1.12 3.33 61.64 59.4 38.59 148.14 94.85 10.24 1.46 1.54 8.9 35.1 2.53 5.44 14.19 11.46 3.71 22.68 23.53 5.77 4.83 51.64 2.59 10.62 5.95 74.54 7.91 27.11 16.99 4.54 7.41 59.23 20.45 14.23 4.49 13.05 193.75 3.76 13.28 70.27 8.35 22.84 11.53 4.67 3.44 1211.68 17.45 5.46 935.74 2.76 129.81 21.3 4.88 29.1 6.7 7.5 30.52 4.14 3.31 126.72 5.56 46.53 7.95 5.84 9.15 9.37 10.18 7.18 6.3 120.43 21.92 10.79 14.76 6.36 43.9 30.34 9.79 56.68 17.42">
<param name="yValues" value="188.082 3007.183 101.565 117.631 5452.500 171.065 1500.645 92.833 1041.766 265.482 32.794 144.703 166.940 477.338 884.506 261.363 50.362 786.052 39.775 22.400 41.240 69.098 58.840 357.489 174.106 28.304 12.453 252.132 96.701 53.230 51.401 23.552 4.992 129.107 4.732 6.913 32.671 190.341 62.397 14.903 57.371 8.280 36.009 22.307 3.766 69.633 6.334 90.156 22.235 332.616 5.114 2.270 6.419 116.506 106.017 65.974 246.882 155.313 16.408 2.327 2.296 12.848 50.581 3.530 7.535 17.592 14.207 4.597 27.881 27.890 6.113 5.057 51.756 2.461 9.715 5.231 64.511 6.720 23.001 13.742 3.609 5.857 43.732 14.475 10.028 3.064 8.742 129.367 2.510 8.451 43.129 5.091 13.793 6.623 2.293 1.520 532.915 7.191 2.247 378.600 1.075 49.589 7.969 1.770 10.360 2.379 2.644 10.195 1.370 1.091 39.349 1.717 13.382 2.280 1.568 2.438 2.175 2.343 1.594 1.313 24.297 4.369 2.146 2.787 1.077 6.845 4.527 1.390 5.969 1.652">
<param name="labels" value="Switzerland Japan Norway Denmark #United States# Sweden Germany Finland France Netherlands #United Arab Emirates# Austria Belgium Canada Italy Australia Ireland UnitedKingdom Singapore Kuwait #New Zealand# #Hong Kong# Israel Spain Taiwan #Puerto Rico# Oman #South Korea# #Saudi Arabia# Greece Portugal Libya #Trinidad and Tobago# Argentina Gabon Slovenia #Czech Republic# Iran Malaysia Slovakia Venezuela Uruguay Chile Bulgaria Estonia Algeria Panama #South Africa# Hungary Brazil Latvia Mauritius #Costa Rica# Turkey Thailand Poland Russia Mexico Belarus Botswana Namibia Tunisia Colombia Jamaica Jordan Syria Ecuador Lithuania Rumania Peru #El Salvador# Paraguay Ukraine Congo Guatemala Honduras Vietnam #Dominican Republic# Morocco Kazakstan Nicaragua Bolivia Egypt Iraq #Ivory Coast# Moldova Yemen Indonesia Armenia Cameroon Philippines Senegal Uzbekistan Zimbabwe Kyrgyzstan Albania China Ghana Georgia India Liberia Pakistan Uganda Laos Sudan Guinea Azerbaijan Kenya Togo #Central African Rep# Nigeria Benin Burma Rwanda Tajikistan Niger Zambia Burkina Haiti Burundi Bangladesh Nepal Mali Madagascar Chad Zaire Tanzania Malawi Ethiopia Mozambique">
<param name="horizAxis" value="1 1400 200 200">
<param name="vertAxis" value="1 6000 1000 1000">
<param name="labelAxes" value="true">
<param name="transformAxes" value="true">
</applet>
</div>

		<p>Drag the red line on each axis to remove the skewness in that variable. 
			Raising each variable to a power of approximately -0.2 removes its skewness, 
			and increases the correlation coefficient from 0.25 to 0.59, a much better 
			indication of the strength of the relationship. <span class="gray">(For 
			fine tuning of the powers, use the arrow keys on your keyboard.)</span> 
		</p>

		<div class="centred"><table width="85%" border="1" class="centred" cellpadding="0" cellspacing="0" style="background-color:#FFFFFF">
      <tr> 
        <td><p>You probably found that each variable raised to the power -0.2 
            had a reasonably symmetric distribution. It is however hard to interpret 
            values on these scales, so drag both powers back to 0 (corresponding 
            to a log transformation). The correlation between log(GDP) and log(population) 
            is 0.63 which is probably the best indication of the strength of the 
            relationship.</p></td>
      </tr>
    </table></div>
    <p>Note that the 'rich' countries are those that lie on the top left of the 
			cluster of points. The 'poor' countries are towards the bottom right of 
			the cluster. Drag over the crosses to identify the countries. Are there 
			any outliers or clusters of countries?</p>

</div>

<script type='text/javascript'>writePageEnd();</script>

</body>
</html>
